<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#1a0011">
<title>ğŸ’Œ For You</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;600&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  html {
    background: #1a0011;
  }
  body {
    min-height: 100vh;
    min-height: 100dvh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #1a0011, #2d0a1e, #1a0011);
    overflow-x: hidden;
    font-family: 'Poppins', sans-serif;
    color: #fff;
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  /* â”€â”€ floating hearts background â”€â”€ */
  .hearts-bg {
    position: fixed; inset: 0; pointer-events: none; z-index: 0;
  }
  .floating-heart {
    position: absolute;
    bottom: -60px;
    font-size: 20px;
    opacity: 0.15;
    animation: floatUp linear infinite;
  }
  @keyframes floatUp {
    0%   { transform: translateY(0) rotate(0deg); opacity: 0.15; }
    50%  { opacity: 0.3; }
    100% { transform: translateY(-110vh) rotate(360deg); opacity: 0; }
  }

  /* â”€â”€ screens â”€â”€ */
  .screen {
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    position: relative;
    z-index: 10;
    padding: 2rem 1.2rem;
    width: 100%;
    max-width: 600px;
    min-height: 100vh;
  }
  .screen.active { display: flex; }
  .screen.scrollable {
    justify-content: flex-start;
    padding-top: 1rem;
    padding-bottom: 3rem;
    overflow-y: auto;
  }

  /* â”€â”€ back button â”€â”€ */
  .btn-back {
    position: fixed;
    top: 1rem;
    left: 1rem;
    z-index: 100;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.15);
    color: #fff;
    padding: 8px 18px;
    border-radius: 50px;
    font-family: 'Poppins', sans-serif;
    font-size: 0.85rem;
    cursor: pointer;
    transition: background 0.3s;
    display: none;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
  .btn-back:hover { background: rgba(255,255,255,0.15); }
  .btn-back.visible { display: block; }

  /* â”€â”€ SCREEN 1 â€“ question â”€â”€ */
  #screen-question h1 {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(2rem, 6vw, 3.5rem);
    margin-bottom: 0.5rem;
    text-shadow: 0 0 30px rgba(255,100,150,0.5);
  }
  #screen-question .subtitle {
    font-size: 1rem;
    opacity: 0.7;
    margin-bottom: 2.5rem;
    font-weight: 300;
  }
  .btn-row {
    display: flex;
    gap: 2rem;
    position: relative;
    min-height: 80px;
    align-items: center;
  }
  .btn {
    padding: 14px 48px;
    border: none;
    border-radius: 50px;
    font-family: 'Poppins', sans-serif;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.3s, box-shadow 0.3s;
  }
  .btn-yes {
    background: linear-gradient(135deg, #ff4b7a, #ff1f5a);
    color: #fff;
    box-shadow: 0 4px 25px rgba(255,75,122,0.5);
  }
  .btn-yes:hover { transform: scale(1.1); box-shadow: 0 6px 35px rgba(255,75,122,0.7); }
  .btn-no {
    background: rgba(255,255,255,0.1);
    color: #fff;
    border: 2px solid rgba(255,255,255,0.2);
    position: relative;
    transition: none;
    user-select: none;
  }

  /* â”€â”€ SCREEN 2 â€“ loading â”€â”€ */
  #screen-loading .loader-ring {
    width: 80px; height: 80px;
    border: 4px solid rgba(255,75,122,0.15);
    border-top: 4px solid #ff4b7a;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 2rem;
  }
  @keyframes spin { to { transform: rotate(360deg); } }
  #screen-loading .loading-text {
    font-size: 1.3rem;
    min-height: 2em;
    transition: opacity 0.3s;
  }
  #screen-loading .loading-text.special {
    color: #ff8bab;
    font-size: 1.6rem;
    text-shadow: 0 0 20px rgba(255,100,150,0.4);
  }
  #screen-loading .loading-text.special-alt {
    color: #c48aff;
    font-size: 1.6rem;
    font-weight: 700;
    text-shadow: 0 0 20px rgba(196,138,255,0.4);
  }
  .btn-skip {
    position: fixed;
    top: 1rem;
    right: 1rem;
    z-index: 100;
    background: none;
    border: none;
    color: rgba(255,255,255,0.45);
    font-family: 'Poppins', sans-serif;
    font-size: 0.85rem;
    cursor: pointer;
    transition: color 0.3s;
    display: none;
  }
  .btn-skip:hover { color: rgba(255,255,255,0.7); }
  .btn-skip.visible { display: block; }
  .progress-bar-container {
    width: 280px; height: 6px;
    background: rgba(255,255,255,0.08);
    border-radius: 3px;
    margin-top: 1.5rem;
    overflow: hidden;
  }
  .progress-bar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #ff4b7a, #ff8bab);
    border-radius: 3px;
    transition: width 0.4s ease;
  }

  /* â”€â”€ SCREEN 3 â€“ gifts â”€â”€ */
  #screen-gifts h2 {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(1.8rem, 5vw, 2.8rem);
    margin-bottom: 0.5rem;
  }
  #screen-gifts .gift-sub {
    opacity: 0.6;
    margin-bottom: 2.5rem;
    font-weight: 300;
  }
  .gift-row {
    display: flex;
    gap: 2.5rem;
    flex-wrap: wrap;
    justify-content: center;
  }
  .gift-box {
    width: 180px; height: 200px;
    perspective: 600px;
    cursor: pointer;
  }
  .gift-inner {
    width: 100%; height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: linear-gradient(145deg, rgba(255,75,122,0.12), rgba(255,75,122,0.04));
    border: 2px solid rgba(255,75,122,0.2);
    border-radius: 20px;
    transition: transform 0.4s, box-shadow 0.4s, border-color 0.4s;
    padding: 1.5rem;
  }
  .gift-inner:hover {
    transform: translateY(-8px) rotateY(5deg);
    box-shadow: 0 15px 40px rgba(255,75,122,0.25);
    border-color: rgba(255,75,122,0.5);
  }
  .gift-icon {
    font-size: 3.5rem;
    margin-bottom: 1rem;
    animation: giftBounce 2s ease-in-out infinite;
  }
  @keyframes giftBounce {
    0%, 100% { transform: translateY(0); }
    50%      { transform: translateY(-8px); }
  }
  .gift-label { font-weight: 600; font-size: 0.95rem; }

  /* â”€â”€ SCREEN 4 â€“ rose + collage bg + letter â”€â”€ */
  #screen-rose {
    width: 100%;
    max-width: 100%;
    position: relative;
    overflow: hidden;
  }

  /* collage background */
  .collage-bg {
    position: fixed;
    inset: 0;
    z-index: 0;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-auto-rows: 1fr;
    gap: 3px;
    opacity: 0;
    transition: opacity 1s ease;
    pointer-events: none;
  }
  .collage-bg.visible { opacity: 1; }
  .collage-bg .cb-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    filter: brightness(0.7) saturate(0.9);
  }
  .collage-bg .cb-cell {
    overflow: hidden;
    position: relative;
  }

  /* dark gradient overlay so content is readable */
  .collage-overlay {
    position: fixed;
    inset: 0;
    z-index: 1;
    background:
      radial-gradient(ellipse at center, rgba(26,0,17,0.15) 0%, rgba(26,0,17,0.35) 80%),
      linear-gradient(to bottom, rgba(26,0,17,0.2), transparent 10%, transparent 90%, rgba(26,0,17,0.2));
    pointer-events: none;
    opacity: 0;
    transition: opacity 1s ease;
  }
  .collage-overlay.visible { opacity: 1; }

  #screen-rose h1 {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(1.8rem, 5vw, 3rem);
    margin-bottom: 0.3rem;
    text-shadow: 0 0 30px rgba(255,100,150,0.5);
    z-index: 5;
  }
  #screen-rose .rose-sub {
    font-size: 1rem;
    opacity: 0.7;
    font-weight: 300;
    margin-bottom: 1rem;
    z-index: 5;
  }
  #roseCanvas {
    z-index: 5;
    border-radius: 16px;
    max-width: 100%;
    height: auto;
  }
  .sparkle-container {
    position: fixed; inset: 0; pointer-events: none; z-index: 4;
  }
  .sparkle {
    position: absolute;
    width: 4px; height: 4px;
    background: #ff8bab;
    border-radius: 50%;
    animation: sparkleAnim 1.5s ease-out forwards;
  }
  @keyframes sparkleAnim {
    0%   { transform: scale(0) rotate(0deg); opacity: 1; }
    100% { transform: scale(1) rotate(180deg) translateY(-60px); opacity: 0; }
  }

  .section-divider {
    width: 60px; height: 2px;
    background: linear-gradient(90deg, transparent, rgba(255,75,122,0.5), transparent);
    margin: 2rem auto;
    z-index: 5;
  }

  /* valentine card */
  .card-section {
    margin-top: 1rem;
    width: 100%;
    max-width: 340px;
    z-index: 5;
    overflow: visible;
  }
  .vcard {
    position: relative;
    width: 100%;
    aspect-ratio: 3/4;
    perspective: 1200px;
    cursor: pointer;
    overflow: visible;
    transition: transform 0.8s ease;
  }
  /* shift card right when open so the spread is centered */
  .vcard.open {
    transform: translateX(50%);
  }

  /* the inside page â€“ the letter (sits behind cover) */
  .vcard-inside {
    position: absolute;
    inset: 0;
    background: linear-gradient(170deg, #fff5f7, #ffe8ee, #fff0f3);
    border-radius: 0 12px 12px 0;
    padding: 1.8rem 1.4rem 1.2rem;
    display: flex;
    flex-direction: column;
    justify-content: center;
    box-shadow: inset 0 0 30px rgba(200,100,130,0.08);
    overflow-y: auto;
  }
  .vcard-inside .ink {
    font-family: 'Poppins', sans-serif;
    font-weight: 300;
    color: #2a1a2e;
    font-size: clamp(0.65rem, 2.2vw, 0.85rem);
    line-height: 1.8;
    text-align: left;
    opacity: 0;
    transition: opacity 0.8s ease 0.5s;
  }
  .vcard.open .vcard-inside .ink { opacity: 1; }
  .vcard-inside .ink-sign {
    font-family: 'Dancing Script', cursive;
    color: #2a1a2e;
    font-size: 1.1rem;
    text-align: right;
    margin-top: 1rem;
    opacity: 0;
    transition: opacity 0.8s ease 0.8s;
  }
  .vcard.open .vcard-inside .ink-sign { opacity: 1; }

  /* the cover â€“ has front face and back face (heart balloons) */
  .vcard-cover {
    position: absolute;
    inset: 0;
    transform-origin: left center;
    transition: transform 0.8s ease;
    z-index: 2;
    transform-style: preserve-3d;
  }
  .vcard.open .vcard-cover {
    transform: rotateY(-180deg);
  }
  /* front of cover */
  .vcard-cover-front {
    position: absolute;
    inset: 0;
    background: linear-gradient(145deg, #c0274e, #9e1a3c, #7a1430);
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    backface-visibility: hidden;
    box-shadow: 2px 0 15px rgba(0,0,0,0.3);
  }
  .vcard-cover-heart {
    font-size: 3.5rem;
    margin-bottom: 0.8rem;
    filter: drop-shadow(0 2px 8px rgba(0,0,0,0.2));
  }
  .vcard-cover-text {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(1.4rem, 4vw, 1.8rem);
    color: #ffccd9;
    text-shadow: 0 1px 6px rgba(0,0,0,0.2);
  }
  .vcard-cover-tap {
    position: absolute;
    bottom: 1.2rem;
    font-size: 0.75rem;
    color: rgba(255,255,255,0.4);
    font-family: 'Poppins', sans-serif;
  }
  /* back of cover (heart balloons) â€“ shown when flipped */
  .vcard-cover-back {
    position: absolute;
    inset: 0;
    background: linear-gradient(170deg, #fff5f7, #ffe8ee, #fff0f3);
    border-radius: 12px 0 0 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    backface-visibility: hidden;
    transform: rotateY(180deg);
    box-shadow: -2px 0 10px rgba(0,0,0,0.15);
  }
  .vcard-cover-back svg { width: 80%; height: 80%; }

  /* spine edge */
  .vcard-spine {
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 4px;
    background: linear-gradient(to bottom, #7a1430, #5a0f22, #7a1430);
    border-radius: 12px 0 0 12px;
    z-index: 3;
  }

  /* â”€â”€ SCREEN 5 â€“ ticket joke â”€â”€ */
  #screen-ticket .ticket-msg {
    font-size: 1.1rem;
    line-height: 1.7;
    max-width: 480px;
    background: rgba(255,75,122,0.08);
    border: 1px solid rgba(255,75,122,0.15);
    border-radius: 16px;
    padding: 2rem;
    margin-bottom: 2rem;
    animation: fadeSlideUp 0.8s ease;
  }
  #screen-ticket .jk-msg {
    display: none;
    font-family: 'Poppins', sans-serif;
    font-size: 1.2rem;
    font-weight: 600;
    color: #ff8bab;
    animation: fadeSlideUp 0.6s ease;
  }
  @keyframes fadeSlideUp {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  /* â”€â”€ general â”€â”€ */
  .fade-in { animation: fadeIn 0.6s ease; }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

  /* â”€â”€ mobile â”€â”€ */
  @media (max-width: 480px) {
    .screen { padding: 1.5rem 1rem; }
    .btn { padding: 12px 36px; font-size: 1rem; }
    .btn-row { gap: 1.2rem; }
    .gift-row { gap: 1.2rem; }
    .gift-box { width: 150px; height: 170px; }
    .gift-icon { font-size: 2.8rem; }
    .collage-bg { grid-template-columns: repeat(3, 1fr); }
    .card-section { max-width: 280px; }
    .vcard-inside { padding: 1.2rem 0.9rem 0.8rem; }
    .vcard-inside .ink { font-size: clamp(0.55rem, 2vw, 0.75rem); line-height: 1.65; }
    .vcard-inside .ink-sign { font-size: 0.9rem; }
    .vcard.open { transform: none; }
    #roseCanvas { width: 100%; }
    .btn-back { top: 0.6rem; left: 0.6rem; padding: 6px 14px; font-size: 0.8rem; }
    .btn-skip { top: 0.6rem; right: 0.6rem; font-size: 0.7rem; }
    #screen-ticket .ticket-msg { padding: 1.5rem; font-size: 1rem; }
  }
</style>
</head>
<body>

<!-- floating hearts -->
<div class="hearts-bg" id="heartsBg"></div>

<!-- collage background (hidden until rose screen) -->
<div class="collage-bg" id="collageBg"></div>
<div class="collage-overlay" id="collageOverlay"></div>

<!-- back button (shared) -->
<button class="btn-back" id="btnBack" onclick="goBack()">â† Back</button>
<!-- skip button for loading -->
<button class="btn-skip" id="btnSkip" onclick="skipLoading()">skip â†’</button>

<!-- SCREEN 1 â”€â”€ will you be my valentine â”€â”€ -->
<div class="screen active" id="screen-question">
  <h1>Will you be my Valentine?</h1>
  <p class="subtitle">Choose wisely... ğŸ’•</p>
  <div class="btn-row">
    <button class="btn btn-yes" onclick="sayYes()">Yes ğŸ’–</button>
    <button class="btn btn-no" id="btnNo">No</button>
  </div>
</div>

<!-- SCREEN 2 â”€â”€ loading â”€â”€ -->
<div class="screen" id="screen-loading">
  <div class="loader-ring"></div>
  <div class="loading-text" id="loadingText">Loading...</div>
  <div class="progress-bar-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>
</div>

<!-- SCREEN 3 â”€â”€ choose a gift â”€â”€ -->
<div class="screen" id="screen-gifts">
  <h2>Pick a Gift ğŸ</h2>
  <p class="gift-sub">Choose wisely...</p>
  <div class="gift-row">
    <div class="gift-box" onclick="openGift(1)">
      <div class="gift-inner">
        <div class="gift-icon">ğŸ</div>
        <div class="gift-label">Gift&nbsp;One</div>
      </div>
    </div>
    <div class="gift-box" onclick="openGift(2)">
      <div class="gift-inner">
        <div class="gift-icon">ğŸ€</div>
        <div class="gift-label">Gift&nbsp;Two</div>
      </div>
    </div>
  </div>
</div>

<!-- SCREEN 4 â”€â”€ rose + collage bg + letter â”€â”€ -->
<div class="screen scrollable" id="screen-rose">
  <h1>Happy Valentine's Day ğŸŒ¹</h1>
  <p style="z-index:5; margin-bottom:0.8rem; font-size:1rem; opacity:0.7; font-weight:600; letter-spacing:0.3px;">Scroll all the way down to see the full collage</p>
  <canvas id="roseCanvas" width="450" height="560"></canvas>

  <!-- valentine card -->
  <div class="section-divider"></div>
  <div class="card-section">
    <div class="vcard" id="vcard" onclick="toggleCard()">
      <!-- inside page (letter) â€“ revealed when cover flips -->
      <div class="vcard-inside">
        <div class="ink">
          Happy Valentines day my Maggi,
          <br><br>
          I know we don't really do valentines day so I'll keep this short and sweet. I love you, not more today than any other day because today is the same as any other and I love you more than any day. Thank you for the way you treat me, you're an incredible girlfriend who knows me more than anyone and keeps me level even though more while I get on your nerves. Im grateful that I can call you my best friend and my girlfriend, and I look forward to spending the rest of my life with you.
        </div>
        <div class="ink-sign">Your's forever,<br>Your Z â¤ï¸</div>
      </div>
      <!-- cover â€“ front face + back face (heart balloons) -->
      <div class="vcard-cover">
        <div class="vcard-cover-front">
          <div class="vcard-cover-heart">â¤ï¸</div>
          <div class="vcard-cover-text">Happy Valentine's Day</div>
          <div class="vcard-cover-tap">tap to open</div>
        </div>
        <div class="vcard-cover-back">
          <svg viewBox="0 0 200 280" xmlns="http://www.w3.org/2000/svg">
            <!-- strings -->
            <path d="M60 275 Q58 200 56 145" stroke="#d4a0b0" stroke-width="0.8" fill="none"/>
            <path d="M100 275 Q102 205 100 130" stroke="#d4a0b0" stroke-width="0.8" fill="none"/>
            <path d="M140 275 Q138 195 141 155" stroke="#d4a0b0" stroke-width="0.8" fill="none"/>
            <path d="M75 275 Q77 210 74 110" stroke="#d4a0b0" stroke-width="0.8" fill="none"/>
            <path d="M125 275 Q122 200 126 95" stroke="#d4a0b0" stroke-width="0.8" fill="none"/>
            <!-- heart balloons -->
            <g transform="translate(56,125) scale(1.1)">
              <path d="M0,8 C0,-5 -15,-12 -15,0 C-15,12 0,24 0,30 C0,24 15,12 15,0 C15,-12 0,-5 0,8Z" fill="#e8436e" opacity="0.85"/>
              <ellipse cx="-5" cy="-1" rx="3.5" ry="4" fill="rgba(255,255,255,0.2)" transform="rotate(-20,-5,-1)"/>
            </g>
            <g transform="translate(100,110) scale(1.2)">
              <path d="M0,8 C0,-5 -15,-12 -15,0 C-15,12 0,24 0,30 C0,24 15,12 15,0 C15,-12 0,-5 0,8Z" fill="#ff6b8a" opacity="0.8"/>
              <ellipse cx="-5" cy="-1" rx="3.5" ry="4" fill="rgba(255,255,255,0.2)" transform="rotate(-20,-5,-1)"/>
            </g>
            <g transform="translate(141,135) scale(1.0)">
              <path d="M0,8 C0,-5 -15,-12 -15,0 C-15,12 0,24 0,30 C0,24 15,12 15,0 C15,-12 0,-5 0,8Z" fill="#c0274e" opacity="0.85"/>
              <ellipse cx="-5" cy="-1" rx="3.5" ry="4" fill="rgba(255,255,255,0.2)" transform="rotate(-20,-5,-1)"/>
            </g>
            <g transform="translate(74,90) scale(1.15)">
              <path d="M0,8 C0,-5 -15,-12 -15,0 C-15,12 0,24 0,30 C0,24 15,12 15,0 C15,-12 0,-5 0,8Z" fill="#ff8bab" opacity="0.75"/>
              <ellipse cx="-5" cy="-1" rx="3.5" ry="4" fill="rgba(255,255,255,0.25)" transform="rotate(-20,-5,-1)"/>
            </g>
            <g transform="translate(126,75) scale(1.25)">
              <path d="M0,8 C0,-5 -15,-12 -15,0 C-15,12 0,24 0,30 C0,24 15,12 15,0 C15,-12 0,-5 0,8Z" fill="#d4305a" opacity="0.8"/>
              <ellipse cx="-5" cy="-1" rx="3.5" ry="4" fill="rgba(255,255,255,0.2)" transform="rotate(-20,-5,-1)"/>
            </g>
            <!-- decorative dots -->
            <circle cx="42" cy="105" r="2" fill="#ffb3c9" opacity="0.5"/>
            <circle cx="158" cy="120" r="1.5" fill="#ffb3c9" opacity="0.4"/>
            <circle cx="88" cy="68" r="1.5" fill="#ffb3c9" opacity="0.45"/>
            <circle cx="152" cy="85" r="2" fill="#ffb3c9" opacity="0.35"/>
            <circle cx="50" cy="160" r="1.5" fill="#ffb3c9" opacity="0.3"/>
          </svg>
        </div>
      </div>
      <div class="vcard-spine"></div>
    </div>
  </div>

  <!-- extra scroll space to reveal collage -->
  <div style="min-height:100vh; flex-shrink:0;"></div>

  <div class="sparkle-container" id="sparkles"></div>
</div>

<!-- SCREEN 5 â”€â”€ ticket joke â”€â”€ -->
<div class="screen" id="screen-ticket">
  <div class="ticket-msg" id="ticketMsg">
    âœˆï¸&ensp;I've booked a ticket to come see you next week because I have no assignments that week, so I'm going to skip classes just to be with you.
  </div>
  <div class="jk-msg" id="jkMsg">Jokes ğŸ˜­<br>Choose gift one</div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   IMAGE LIST (actual filenames)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const IMAGES = [
  'images/001521580006.jpeg',
  'images/0e707bf6-b180-42ec-a3ec-1fb4e8ad7708.jpg',
  'images/50A7F1E6-13E4-4ADD-9420-04F7842ECF87.jpeg',
  'images/IMG_0358.jpeg',
  'images/IMG_0457.JPG',
  'images/IMG_1334.JPG',
  'images/IMG_2146.JPG',
  'images/IMG_2535.jpeg',
  'images/IMG_2573.jpeg',
  'images/IMG_2850.JPG',
  'images/IMG_2882.jpeg',
  'images/IMG_3357.jpeg',
  'images/IMG_3773.JPG',
  'images/IMG_3957.jpeg',
  'images/IMG_4201.jpeg',
  'images/IMG_4264.jpeg',
];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FLOATING HEARTS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
(function spawnHearts() {
  const bg = document.getElementById('heartsBg');
  const hearts = ['â¤','ğŸ’•','ğŸ’—','â™¥','ğŸ’–'];
  for (let i = 0; i < 25; i++) {
    const h = document.createElement('span');
    h.className = 'floating-heart';
    h.textContent = hearts[Math.floor(Math.random()*hearts.length)];
    h.style.left = Math.random()*100 + '%';
    h.style.fontSize = (14 + Math.random()*18) + 'px';
    h.style.animationDuration = (8 + Math.random()*12) + 's';
    h.style.animationDelay = (Math.random()*10) + 's';
    bg.appendChild(h);
  }
})();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COLLAGE BACKGROUND
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function buildCollageBg() {
  const container = document.getElementById('collageBg');
  if (container.children.length > 0) return;
  // use ALL images, shuffled
  const shuffled = [...IMAGES].sort(() => Math.random() - 0.5);
  shuffled.forEach(src => {
    const cell = document.createElement('div');
    cell.className = 'cb-cell';
    const img = document.createElement('img');
    img.className = 'cb-img';
    img.src = src;
    img.alt = '';
    img.loading = 'lazy';
    cell.appendChild(img);
    container.appendChild(cell);
  });
}

function showCollageBg() {
  buildCollageBg();
  document.getElementById('collageBg').classList.add('visible');
  document.getElementById('collageOverlay').classList.add('visible');
}
function hideCollageBg() {
  document.getElementById('collageBg').classList.remove('visible');
  document.getElementById('collageOverlay').classList.remove('visible');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NAVIGATION / BACK BUTTON
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let screenHistory = ['screen-question'];
const btnBack = document.getElementById('btnBack');
const btnSkip = document.getElementById('btnSkip');

function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  window.scrollTo(0, 0);
  const noBack = ['screen-question', 'screen-loading', 'screen-gifts'];
  btnBack.classList.toggle('visible', !noBack.includes(id));
  btnSkip.classList.toggle('visible', id === 'screen-loading');
  // toggle collage bg
  if (id === 'screen-rose') showCollageBg();
  else hideCollageBg();
}

function navigateTo(id) {
  screenHistory.push(id);
  showScreen(id);
}

function goBack() {
  if (screenHistory.length > 1) {
    screenHistory.pop();
    const prev = screenHistory[screenHistory.length - 1];
    showScreen(prev);
    if (sparkleInterval) { clearInterval(sparkleInterval); sparkleInterval = null; }
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 1 â€“ NO BUTTON DODGE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const btnNo = document.getElementById('btnNo');
let dodgeCount = 0;
const dodgeMessages = [
  "No", "Nope ğŸ™ƒ", "Try again", "Not happening", "Think again",
  "You sure?", "Really?", "Can't click me", "Hehe", "Nah ğŸ˜",
  "Too slow", "Nice try", "lol no"
];

function repositionNo() {
  const vw = window.innerWidth, vh = window.innerHeight;
  const bw = btnNo.offsetWidth, bh = btnNo.offsetHeight;
  const x = Math.random() * (vw - bw - 40) + 20;
  const y = Math.random() * (vh - bh - 40) + 20;
  btnNo.style.position = 'fixed';
  btnNo.style.left = x + 'px';
  btnNo.style.top = y + 'px';
  btnNo.style.zIndex = 1000;
  dodgeCount++;
  btnNo.textContent = dodgeMessages[dodgeCount % dodgeMessages.length];
}

btnNo.addEventListener('mouseenter', repositionNo);
btnNo.addEventListener('touchstart', e => { e.preventDefault(); repositionNo(); });
btnNo.addEventListener('click', e => { e.preventDefault(); repositionNo(); });

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 2 â€“ LOADING
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function sayYes() {
  btnNo.style.position = '';
  screenHistory.push('screen-loading');
  showScreen('screen-loading');
  startLoading();
}

let loadingInterval = null;

function skipLoading() {
  if (loadingInterval) { clearInterval(loadingInterval); loadingInterval = null; }
  navigateTo('screen-gifts');
}

function startLoading() {
  const messages = [
    { text: "Loading...", cls: "" },
    { text: "Buffering...", cls: "" },
    { text: "Downloading love.exe...", cls: "" },
    { text: "Connecting to heart server...", cls: "" },
    { text: "Compiling emotions...", cls: "" },
    { text: "Fat batty gyal", cls: "special-alt" },
    { text: "Syncing heartbeats...", cls: "" },
    { text: "Initializing valentine protocol...", cls: "" },
    { text: "Decompressing romance.zip...", cls: "" },
    { text: "Almost there...", cls: "" },
    { text: "Ready! ğŸ’–", cls: "" },
  ];

  const textEl = document.getElementById('loadingText');
  const barEl  = document.getElementById('progressBar');
  let i = 0;

  loadingInterval = setInterval(() => {
    if (i >= messages.length) {
      clearInterval(loadingInterval); loadingInterval = null;
      setTimeout(() => navigateTo('screen-gifts'), 600);
      return;
    }
    const msg = messages[i];
    textEl.style.opacity = 0;
    setTimeout(() => {
      textEl.textContent = msg.text;
      textEl.className = 'loading-text' + (msg.cls ? ' ' + msg.cls : '');
      textEl.style.opacity = 1;
    }, 200);
    barEl.style.width = ((i + 1) / messages.length * 100) + '%';
    i++;
  }, 1400);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 3 â€“ GIFTS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function openGift(n) {
  if (n === 1) {
    navigateTo('screen-rose');
    drawRose();
    startSparkles();
  } else {
    navigateTo('screen-ticket');
    document.getElementById('jkMsg').style.display = 'none';
    setTimeout(() => {
      document.getElementById('jkMsg').style.display = 'block';
    }, 2500);
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VALENTINE CARD TOGGLE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function toggleCard() {
  document.getElementById('vcard').classList.toggle('open');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   3D ROSE ON CANVAS (improved)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function drawRose() {
  const canvas = document.getElementById('roseCanvas');
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;
  const cx = W / 2, cy = H / 2 - 40;

  ctx.clearRect(0, 0, W, H);

  // outer glow
  ctx.save();
  ctx.globalCompositeOperation = 'lighter';
  const outerGlow = ctx.createRadialGradient(cx, cy, 20, cx, cy, 180);
  outerGlow.addColorStop(0, 'rgba(255,75,122,0.12)');
  outerGlow.addColorStop(0.5, 'rgba(255,75,122,0.05)');
  outerGlow.addColorStop(1, 'rgba(255,75,122,0)');
  ctx.beginPath(); ctx.arc(cx, cy, 180, 0, Math.PI*2);
  ctx.fillStyle = outerGlow; ctx.fill();
  ctx.restore();

  // stem with gradient
  ctx.save();
  const stemGrad = ctx.createLinearGradient(cx, cy+60, cx, cy+330);
  stemGrad.addColorStop(0, '#3a9e4a');
  stemGrad.addColorStop(1, '#1e6b2a');
  ctx.strokeStyle = stemGrad;
  ctx.lineWidth = 6;
  ctx.lineCap = 'round';
  ctx.beginPath();
  ctx.moveTo(cx, cy + 60);
  ctx.bezierCurveTo(cx-6, cy+120, cx+10, cy+200, cx-4, cy+280);
  ctx.bezierCurveTo(cx-8, cy+310, cx-2, cy+330, cx, cy+340);
  ctx.stroke();

  // thorns
  ctx.strokeStyle = '#2d7a3a'; ctx.lineWidth = 2.5; ctx.lineCap = 'round';
  [{x:cx-3,y:cy+130,a:-0.9},{x:cx+7,y:cy+190,a:0.8},{x:cx-5,y:cy+250,a:-0.7},{x:cx+4,y:cy+300,a:0.6}].forEach(t => {
    ctx.beginPath(); ctx.moveTo(t.x, t.y);
    ctx.quadraticCurveTo(t.x+Math.cos(t.a)*8, t.y-4, t.x+Math.cos(t.a)*16, t.y+Math.sin(t.a)*10);
    ctx.stroke();
  });

  // leaves
  function drawLeaf(ox, oy, sx, sy, rot) {
    ctx.save();
    ctx.translate(ox, oy); ctx.rotate(rot); ctx.scale(sx, sy);
    // leaf body
    const lg = ctx.createLinearGradient(0, -12, 44, 0);
    lg.addColorStop(0, '#4ab55a'); lg.addColorStop(1, '#2d8a3a');
    ctx.fillStyle = lg;
    ctx.beginPath(); ctx.moveTo(0,0);
    ctx.bezierCurveTo(10,-20, 38,-18, 50,-2);
    ctx.bezierCurveTo(38,16, 10,20, 0,0);
    ctx.fill();
    // leaf vein
    ctx.beginPath(); ctx.moveTo(3,0);
    ctx.quadraticCurveTo(25, -3, 44, -1);
    ctx.strokeStyle = 'rgba(30,80,40,0.5)'; ctx.lineWidth = 1; ctx.stroke();
    // side veins
    for (let v = 0.25; v < 0.8; v += 0.2) {
      const vx = 3 + (44-3)*v, vy = -1;
      ctx.beginPath(); ctx.moveTo(vx, vy);
      ctx.lineTo(vx+8, vy-6); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(vx, vy);
      ctx.lineTo(vx+8, vy+6); ctx.stroke();
    }
    ctx.restore();
  }
  drawLeaf(cx-8, cy+160, 1.3, 1, -0.5);
  drawLeaf(cx+6, cy+220, -1.2, 1, 0.4);
  drawLeaf(cx-10, cy+280, 0.9, 0.8, -0.7);
  ctx.restore();

  // sepals (small green bits at base of flower)
  ctx.save();
  for (let i = 0; i < 5; i++) {
    const ang = (Math.PI*2/5)*i - Math.PI/2;
    ctx.save(); ctx.translate(cx, cy+50); ctx.rotate(ang);
    ctx.fillStyle = '#3a9e4a';
    ctx.beginPath(); ctx.moveTo(0,0);
    ctx.bezierCurveTo(-6,-10, -4,-25, 0,-30);
    ctx.bezierCurveTo(4,-25, 6,-10, 0,0);
    ctx.fill(); ctx.restore();
  }
  ctx.restore();

  // petals â€“ more layers, softer gradients
  const layers = [
    {n:8, r:75, w:55, h:80, c:['#9e1a3c','#7a1430'],  a:0},
    {n:7, r:62, w:50, h:72, c:['#b8224a','#9e1a3c'],  a:0.3},
    {n:7, r:50, w:44, h:64, c:['#d4305a','#b8224a'],  a:0.6},
    {n:6, r:38, w:38, h:54, c:['#e8436e','#d4305a'],  a:0.15},
    {n:6, r:28, w:32, h:44, c:['#f25c82','#e8436e'],  a:0.5},
    {n:5, r:18, w:24, h:34, c:['#ff7a9e','#f25c82'],  a:0.8},
    {n:4, r:10, w:18, h:26, c:['#ff9db8','#ff7a9e'],  a:0.1},
  ];

  function drawPetal(x, y, w, h, angle, c1, c2) {
    ctx.save(); ctx.translate(x, y); ctx.rotate(angle);
    // petal fill
    const g = ctx.createRadialGradient(0, -h*0.4, 2, 0, -h*0.3, h*0.9);
    g.addColorStop(0, c1); g.addColorStop(1, c2);
    ctx.fillStyle = g;
    ctx.beginPath(); ctx.moveTo(0, 0);
    ctx.bezierCurveTo(-w*0.55, -h*0.2, -w*0.55, -h*0.8, -w*0.1, -h);
    ctx.bezierCurveTo(0, -h*1.02, 0, -h*1.02, w*0.1, -h);
    ctx.bezierCurveTo(w*0.55, -h*0.8, w*0.55, -h*0.2, 0, 0);
    ctx.fill();
    // petal edge highlight
    ctx.strokeStyle = 'rgba(255,200,220,0.12)'; ctx.lineWidth = 0.8;
    ctx.beginPath(); ctx.moveTo(0,0);
    ctx.bezierCurveTo(-w*0.55, -h*0.2, -w*0.55, -h*0.8, -w*0.1, -h);
    ctx.bezierCurveTo(0, -h*1.02, 0, -h*1.02, w*0.1, -h);
    ctx.stroke();
    // petal vein
    ctx.beginPath(); ctx.moveTo(0, -4);
    ctx.quadraticCurveTo(0, -h*0.5, 0, -h*0.85);
    ctx.strokeStyle = 'rgba(100,20,40,0.15)'; ctx.lineWidth = 0.6; ctx.stroke();
    ctx.restore();
  }

  layers.forEach(l => {
    for (let i = 0; i < l.n; i++) {
      const ang = l.a + (Math.PI*2/l.n)*i;
      const px = cx + Math.cos(ang)*l.r*0.25;
      const py = cy + Math.sin(ang)*l.r*0.25;
      drawPetal(px, py, l.w, l.h, ang - Math.PI/2, l.c[0], l.c[1]);
    }
  });

  // center spiral (tighter)
  ctx.save(); ctx.translate(cx, cy); ctx.beginPath();
  for (let t = 0; t < 4*Math.PI*2; t += 0.04) {
    const r = 1.5 + t*1.1;
    const x = Math.cos(t)*r, y = Math.sin(t)*r*0.55;
    t === 0 ? ctx.moveTo(x,y) : ctx.lineTo(x,y);
  }
  ctx.strokeStyle = 'rgba(120,20,50,0.4)'; ctx.lineWidth = 1.2; ctx.stroke(); ctx.restore();

  // center bud with layered gradient
  const bud1 = ctx.createRadialGradient(cx-2, cy-2, 0, cx, cy, 14);
  bud1.addColorStop(0, '#ffb3c9'); bud1.addColorStop(0.3, '#ff8bab');
  bud1.addColorStop(0.7, '#e8436e'); bud1.addColorStop(1, '#b8224a');
  ctx.beginPath(); ctx.arc(cx, cy, 11, 0, Math.PI*2); ctx.fillStyle = bud1; ctx.fill();

  // inner highlight
  const bud2 = ctx.createRadialGradient(cx-3, cy-3, 0, cx, cy, 6);
  bud2.addColorStop(0, 'rgba(255,220,235,0.6)'); bud2.addColorStop(1, 'rgba(255,220,235,0)');
  ctx.beginPath(); ctx.arc(cx, cy, 6, 0, Math.PI*2); ctx.fillStyle = bud2; ctx.fill();

  // dew drops (improved with sharper highlights)
  function drawDew(x, y, r) {
    ctx.save();
    // shadow
    ctx.beginPath(); ctx.arc(x+1, y+1, r, 0, Math.PI*2);
    ctx.fillStyle = 'rgba(0,0,0,0.15)'; ctx.fill();
    // body
    const d = ctx.createRadialGradient(x-r*0.35, y-r*0.35, r*0.05, x, y, r);
    d.addColorStop(0, 'rgba(255,255,255,0.85)');
    d.addColorStop(0.4, 'rgba(200,230,255,0.4)');
    d.addColorStop(1, 'rgba(200,230,255,0.05)');
    ctx.beginPath(); ctx.arc(x, y, r, 0, Math.PI*2); ctx.fillStyle = d; ctx.fill();
    // specular
    ctx.beginPath(); ctx.arc(x-r*0.25, y-r*0.25, r*0.3, 0, Math.PI*2);
    ctx.fillStyle = 'rgba(255,255,255,0.7)'; ctx.fill();
    ctx.restore();
  }
  drawDew(cx+42, cy-45, 4.5);
  drawDew(cx-30, cy+18, 3.5);
  drawDew(cx+18, cy-62, 3);
  drawDew(cx-48, cy-20, 2.5);
  drawDew(cx+10, cy+42, 2);
}

/* sparkles */
let sparkleInterval = null;
function startSparkles() {
  if (sparkleInterval) return;
  const container = document.getElementById('sparkles');
  sparkleInterval = setInterval(() => {
    const s = document.createElement('div');
    s.className = 'sparkle';
    s.style.left = (20+Math.random()*60)+'%';
    s.style.top  = (20+Math.random()*60)+'%';
    s.style.width = s.style.height = (2+Math.random()*4)+'px';
    s.style.background = ['#ff8bab','#ffb3c9','#fff','#ff4b7a'][Math.floor(Math.random()*4)];
    container.appendChild(s);
    setTimeout(() => s.remove(), 1500);
  }, 200);
}
</script>
</body>
</html>
